{"remainingRequest":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\lee\\Desktop\\myblog\\blog_view\\src\\store\\index.js","dependencies":[{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\src\\store\\index.js","mtime":1657249375000},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\babel.config.js","mtime":1651919093297},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\lee\\Desktop\\myblog\\blog_view\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVleCBmcm9tICd2dWV4JzsKaW1wb3J0IHsgc2V0VXNlckRhdGEsIHJlbW92ZVVzZXJEYXRhLCByZW1vdmVUb2tlbiwgZ2V0VG9rZW4sIHNldFRva2VuIH0gZnJvbSAnQC9yZXF1ZXN0L3Rva2VuJzsKaW1wb3J0IHsgbG9naW5Ub0JhY2ssIGxvZ291dEZyb21CYWNrIH0gZnJvbSAnQC9hcGlzL3VzZXIuanMnOwpWdWUudXNlKFZ1ZXgpOwpleHBvcnQgZGVmYXVsdCBuZXcgVnVleC5TdG9yZSh7CiAgc3RhdGU6IHsKICAgIHVzZXI6IHt9LAogICAgYXJ0aWNsZXM6IFtdLAogICAgdG9rZW46IGdldFRva2VuKCkgPT0gbnVsbCA/ICIiIDogZ2V0VG9rZW4oKQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfQVJUSUNMRVMoc3RhdGUsIGFydGljbGVzKSB7CiAgICAgIHN0YXRlLmFydGljbGVzID0gYXJ0aWNsZXM7CiAgICB9LAoKICAgIFNFVF9VU0VSOiAoc3RhdGUsIHRva2VuKSA9PiB7CiAgICAgIGlmICh0b2tlbiAhPSBudWxsKSB7CiAgICAgICAgc3RhdGUudXNlci5pZCA9IHRva2VuLmlkOwogICAgICAgIHN0YXRlLnVzZXIuYWNjb3VudCA9IHRva2VuLmFjY291bnQ7CiAgICAgICAgc3RhdGUudXNlci5uaWNrbmFtZSA9IHRva2VuLm5pY2tuYW1lOwogICAgICAgIHN0YXRlLnVzZXIuc3RhdHVzID0gdG9rZW4uc3RhdHVzOwogICAgICB9CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvL+eZu+W9lQogICAgbG9naW4oewogICAgICBjb21taXQKICAgIH0sIHVzZXIpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICBsb2dpblRvQmFjayh1c2VyLmFjY291bnQsIHVzZXIucGFzc3dvcmQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSJywgcmVzcG9uc2UuZGF0YS5kYXRhWyJ1c2VyIl0pOyAvL+WtmOWCqOeUqOaIt+S/oeaBr+iHs+a1j+iniOWZqOe8k+WtmAoKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgc2V0VXNlckRhdGEocmVzcG9uc2UuZGF0YS5kYXRhWyJ1c2VyIl0pOwogICAgICAgICAgc2V0VG9rZW4ocmVzcG9uc2UuZGF0YS5kYXRhWyJ0b2tlbiJdKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCgogICAgLy/pgIDlh7oKICAgIGxvZ291dCh7CiAgICAgIGNvbW1pdAogICAgfSwgc3RhdGUpIHsKICAgICAgY29uc29sZS5sb2coc3RhdGUpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGxvZ291dEZyb21CYWNrKHN0YXRlKS50aGVuKGRhdGEgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSJywgbnVsbCk7CiAgICAgICAgICByZW1vdmVUb2tlbigpOwogICAgICAgICAgcmVtb3ZlVXNlckRhdGEoKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KCiAgfQp9KTs="},{"version":3,"sources":["C:/Users/lee/Desktop/myblog/blog_view/src/store/index.js"],"names":["Vue","Vuex","setUserData","removeUserData","removeToken","getToken","setToken","loginToBack","logoutFromBack","use","Store","state","user","articles","token","mutations","SET_ARTICLES","SET_USER","id","account","nickname","status","actions","login","commit","Promise","resolve","reject","password","then","response","console","log","data","catch","error","logout"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport {setUserData, removeUserData, removeToken, getToken, setToken} from '@/request/token'\r\nimport {loginToBack, logoutFromBack} from '@/apis/user.js'\r\n\r\nVue.use(Vuex);\r\n\r\nexport default new Vuex.Store({\r\n  state: {\r\n    user:{},\r\n    articles: [],\r\n    token: getToken()==null ? \"\" : getToken(),\r\n  },\r\n  mutations: {\r\n    SET_ARTICLES(state, articles){\r\n      state.articles = articles\r\n    },\r\n    SET_USER: (state, token) => {\r\n      if(token != null){\r\n        state.user.id = token.id;\r\n        state.user.account = token.account;\r\n        state.user.nickname = token.nickname;\r\n        state.user.status = token.status;\r\n      }\r\n    },\r\n  },\r\n  actions: {\r\n\r\n    //登录\r\n    login({commit}, user) {\r\n      return new Promise((resolve, reject) => {\r\n        loginToBack(user.account, user.password).then(response => {\r\n          \r\n          console.log(response.data)\r\n          commit('SET_USER', response.data.data[\"user\"])\r\n          //存储用户信息至浏览器缓存\r\n          console.log(response.data)\r\n          setUserData(response.data.data[\"user\"])\r\n          setToken(response.data.data[\"token\"])\r\n          resolve()\r\n        }).catch(error => { \r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    //退出\r\n    logout({commit}, state) {\r\n      console.log(state)\r\n      return new Promise((resolve, reject) => {\r\n        logoutFromBack(state).then(data => {\r\n          console.log(data)\r\n          commit('SET_USER', null)\r\n          removeToken()\r\n          removeUserData()\r\n          resolve()\r\n        }).catch(error => {\r\n          reject(error)\r\n        })\r\n      })\r\n    },\r\n\r\n    \r\n\r\n  }\r\n\r\n})\r\n"]}]}