(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51686caf"],{"162a":function(t,e,a){t.exports=a.p+"static/img/noComments.e4a60225.png"},"18a8":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return n}));var s=a("8daa");function i(t){return Object(s["a"])({url:"/addArticle",method:"post",data:JSON.stringify(t)})}function r(){return Object(s["a"])({url:"/articles",method:"get",headers:{"Content-Type":"application/json"}})}function n(t){return Object(s["a"])({url:"/getArticleById",method:"get",headers:{"Content-Type":"application/json"},params:{id:t}})}},"2e8a":function(t,e,a){"use strict";a("f384")},7284:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return r}));var s=a("8daa");function i(t){return Object(s["a"])({url:"/getCommentsByArticleId",method:"get",headers:{"Content-Type":"application/json"},params:{articleId:t}})}function r(t){return Object(s["a"])({url:"/addComment",method:"post",headers:{"Content-Type":"application/json"},data:JSON.stringify(t)})}},"7e25":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"home"},[s("el-container",[s("el-container",[s("el-header",{attrs:{height:"100px"}},[s("Background")],1),s("el-footer",{staticStyle:{padding:"0"},attrs:{height:"60px"}},[s("NavBar",{on:{show:t.showUserMenuBar}})],1)],1),s("el-container",[t.isShow?s("el-aside",{attrs:{width:"11%"}},[s("UserMenuBar",{on:{closeMenu:t.showUserMenuBar}})],1):t._e(),s("el-main",[null!=t.article?s("el-card",[s("div",{staticClass:"articleHead"},[s("h1",[t._v(t._s(t.article.title))]),s("div",[t._v(t._s(t.article.author))]),t.article.tags?s("div",[s("el-tag",{staticStyle:{left:"14px"}},[t._v(t._s(t.article.tags[0]))]),s("el-tag",{staticStyle:{left:"74px"},attrs:{type:"success"}},[t._v(t._s(t.article.tags[1]))]),s("el-tag",{staticStyle:{left:"144px"},attrs:{type:"info"}},[t._v(t._s(t.article.tags[2]))])],1):t._e()]),s("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"articleContent",domProps:{innerHTML:t._s(t.article.content)}}),s("div",{staticClass:"articleFooter"},[s("div",{staticClass:"articleMessages"},[s("label",{attrs:{for:""}},[s("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t.article.numberOfView))]),s("label",{attrs:{for:""}},[s("i",{staticClass:"el-icon-thumb"}),t._v(" "+t._s(t.article.numberOfLike))]),s("label",{attrs:{for:""}},[s("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" "+t._s(t.article.numberOfComment))]),s("label",{},[s("i",{staticClass:"el-icon-bell"}),t._v("2022-3-22 15:39")]),s("label",{staticStyle:{float:"right"}},[s("i",{staticClass:"el-icon-date"}),t._v("发表评论")])]),s("div",{staticClass:"writeComment"},[s("el-input",{staticStyle:{"font-size":"20px"},attrs:{type:"textarea",icon:"el-icon-bell",placeholder:"留下你的评论...",maxlength:"100",rows:3,"show-word-limit":""},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),s("el-button",{staticStyle:{width:"100%","margin-top":"5px","font-size":"20px"},attrs:{type:"primary"},on:{click:t.publishComment}},[t._v("确认发表")])],1),0==t.comments.length?s("div",{staticClass:"nullMsg"},[s("img",{attrs:{src:a("162a"),alt:""}}),s("span",[t._v(" 还没有人对本文发表过评论哦 ")])]):t._e(),t.comments?s("div",{staticClass:"comments"},t._l(t.comments,(function(e,a){return s("div",{key:a,staticClass:"comment"},[s("div",{staticClass:"commenter"},[s("el-avatar",{attrs:{icon:"el-icon-user-solid"}}),t.users[a]?s("p",{staticClass:"commentName"},[t._v(t._s(t.users[a].nickname))]):t._e()],1),s("div",{directives:[{name:"highlight",rawName:"v-highlight"}],staticClass:"commentContent"},[s("p",[t._v(" "+t._s(e.content)+" ")])]),s("div",{staticClass:"commentMessages"},[s("label",{attrs:{for:""}},[s("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(e.numberOfView))]),s("label",{attrs:{for:""}},[s("i",{staticClass:"el-icon-thumb"}),t._v(" "+t._s(e.numberOfLike))]),s("label",{attrs:{for:""}},[s("i",{staticClass:"el-icon-chat-dot-square"}),t._v(" "+t._s(e.numberOfReply))]),s("label",[s("i",{staticClass:"el-icon-date"}),t._v("2022-3-22 15:39")]),s("label",{staticStyle:{float:"right"}},[s("i",{staticClass:"el-icon-top-left"}),t._v("回复")])])])})),0):t._e()])]):t._e()],1),s("el-aside",{attrs:{width:"30%"}},[s("MeShow"),t._v(" "),s("SortBar")],1)],1),s("el-footer",{attrs:{height:"50px"}},[s("FootBar")],1)],1)],1)},i=[],r=a("2f15"),n=a("d000"),l=a("0997"),o=a("e27e"),c=a("2425f"),d=a("7753"),u=a("18a8"),h=a("7284"),m=a("1602"),f={data(){return{id:Number,article:{},comments:[],users:[],comment:"",isShow:!1}},mounted(){let t=this;this.id=Number(this.$route.query.articleId),Object(u["c"])(this.id).then(t=>{this.article=t.data.data,this.article.tags=this.article.tags.split(",")}),Object(h["b"])(this.id).then(t=>(this.comments=t.data.data,t.data.data)).then(e=>{e.forEach(e=>{Object(m["a"])(Number(e.observerId)).then(e=>{t.users.push(e.data.data)})})})},computed:{},methods:{showUserMenuBar(t){this.isShow=t},addZero(t){return t<10?"0"+t:t},getNowDate(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate(),i=t.getHours(),r=t.getMinutes(),n=t.getSeconds(),l=e+"-"+this.addZero(a)+"-"+this.addZero(s)+" "+this.addZero(i)+":"+this.addZero(r)+":"+this.addZero(n);return l},publishComment(){if(0==this.comment.length)alert("评论不可以为空哦");else if(null==this.$store.state.user)alert("需要登录后才可以评论");else{let t={content:this.comment,observerId:this.$store.state.user.id,articleId:this.id,replyId:0,date:this.getNowDate(),numberOfLike:0,numberOfReply:0,numberOfView:0};Object(h["a"])(t).then(t=>{alert(t.data.data),location.reload()}).catch(t=>{console.log(t),alert("发布评论失败")})}}},components:{Background:r["default"],NavBar:n["default"],MeShow:l["default"],SortBar:o["default"],FootBar:c["default"],UserMenuBar:d["a"]}},p=f,g=(a("2e8a"),a("2877")),v=Object(g["a"])(p,s,i,!1,null,"fe656b8e",null);e["default"]=v.exports},f384:function(t,e,a){}}]);
//# sourceMappingURL=chunk-51686caf.706f1931.js.map